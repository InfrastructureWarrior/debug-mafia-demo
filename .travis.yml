sudo: required
services:
- docker
jobs:
  include:
  - stage: Build & Test
    script:
    - docker-compose build
    - docker-compose run --rm api ./gradlew test
    - docker-compose run --rm ui npm run test
  - if: branch = master
    stage: Deploy
    provider: heroku
    script: "./deploy.sh"
